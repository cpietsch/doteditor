{"version":3,"sources":["webpack:///./src/App.vue?f003","webpack:///./src/components/Graph.vue?ad18","webpack:///./src/components/Graph.vue?dae2","webpack:///./src/App.vue?9e04","webpack:///./src/main.js","webpack:///src/components/Graph.vue","webpack:///./src/components/Graph.vue?136d","webpack:///./src/App.vue?2640","webpack:///src/App.vue"],"names":["Vue","config","productionTip","el","template","components"],"mappings":";;;;;AAAA,yC;;;;;;;;;ACAA;AAAA;AACA,4BAAsT;AACtT;AACA;AACA;AACA;AACA;AACiP;AACjP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACtBA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iBAAiB;AACjB,kE;;;;;;;;;ACbA;AAAA;AACA,4BAAgT;AAChT;AACA;AACA;AACA;AACA;AAC8O;AAC9O;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACtBA;AACA;;AAEA,oDAAAA,CAAIC,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;;AAEA;AACA,IAAI,oDAAJ,CAAQ;AACNC,MAAI,MADE;AAENC,YAAU,QAFJ;AAGNC,cAAY,EAAE,0DAAF;AAHN,CAAR,E;;;;;;;;;;;;;;;;ACCA;;AAEA;QAEA;UACA;;uBAEA;iCACA;AACA;wBACA;kCACA;AACA;uBACA;;;AACA;AACA;uBACA;oCACA;qCACA;qCACA;yBACA;AACA;AAEA;AAjBA;;uBAmBA;WACA;AACA;uBACA;WACA;AAEA;AAPA;oBAQA;;gBAGA;AAFA;AAGA;;gCAEA;mCACA;8BACA;iEACA;AACA;iCACA;qDACA;AACA;aACA;0BACA;AACA;0BACA;2CACA;AACA;yBACA;;;AACA;;AAEA;;+BACA;AACA;wBACA;6CACA;;;AACA;uBACA;sIAEA;;AACA;;;AACA;uBACA;;;oBAEA;;sCACA;oDACA;oCAEA;;WACA;AACA;0BACA;6BACA;sBACA;8BACA;+DACA;sBACA;aACA;sBACA;AACA;AACA;eACA;qCACA;qCACA;wCACA;iHACA;AAEA;AAtDA;uBAuDA;kBACA;AACA;oGACA,wGACA,oGACA,kBACA,yEACA;AACA;qBAEA;;qFACA;mCACA,qBACA,yBACA,2BACA,iBACA,uBACA,wBACA,kBACA,eACA,kBAEA;;4GACA,gGACA,oGACA;SACA;AACA;AApHA,G;;;;;;;ACVA,yC;;;;;;;;ACAA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iBAAiB;AACjB,kE;;;;;;;;;;;;;;;;;;;AChDA;;AAEA;QAEA;SACA;;YAEA;cAEA;AAHA;AAIA;;AAGA;AAFA;AARA,G","file":"static/js/app.3a92d2619c95ab0cfc19.js","sourcesContent":["// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-8f2597c2\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = 0VBe\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41df72c7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Graph.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Graph.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41df72c7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Graph.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Graph.vue\n// module id = 5qpT\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"graph\"\n  }, [_c('svg', {\n    ref: \"svg\",\n    attrs: {\n      \"width\": _vm.width,\n      \"height\": _vm.height\n    }\n  })])\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41df72c7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Graph.vue\n// module id = FHUi\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8f2597c2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8f2597c2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","import Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div class=\"graph\">\n    <svg :width=\"width\" :height=\"height\" ref=\"svg\" />\n  </div>\n</template>\n\n<script>\nimport { select, forceSimulation, forceManyBody, forceX, forceY, forceLink } from 'd3'\n\nexport default {\n  name: 'graph',\n  props: ['data'],\n  computed: {\n    width: function(){\n      return window.innerWidth - 20\n    },\n    height: function(){\n      return window.innerHeight - 200\n    },\n    nodes: function(){\n      return this.data.split(' ').map(d => { return { id: d } })\n    },\n    links: function(){\n      return this.linksIds.map(l => {\n        const source = this.findId(l.source)\n        const target = this.findId(l.target)\n        return { source, target }\n      })\n    }\n  },\n  watch: {\n    links: function(){\n      this.update()\n    },\n    nodes: function(){\n      this.update()\n    }\n  },\n  data: function(){\n    return {\n      linksIds: []\n    }\n  },\n  methods: {\n    generateOutput: function(){\n      let out = \"digraph test {\" + \"\\n\"\n      this.nodes.forEach(n => {\n        out += \"\\t\" + n.id + \" [label=\" + n.id + \" shape=box]\" + \"\\n\"\n      })\n      this.linksIds.forEach(l => {\n        out += \"\\t\" + l.source + \" -> \" + l.target + \"\\n\"\n      })\n      out += \"}\"\n      this.$emit('input', out)\n    },\n    findId: function(id){\n      return this.nodes.find(n => n.id === id)\n    },\n    ticked: function(t){\n      this.node.attr(\"x\", function(d) { return d.x; })\n        .attr(\"y\", function(d) { return d.y; })\n\n      this.link.attr(\"d\", this.linkArc);\n    },\n    update: function(){\n      console.log(\"update\", this.links, this.nodes)\n      this.node = this.node.data(this.nodes, function(d) { return d.id;});\n      this.node.exit().remove();\n      this.node = this.node.enter().append(\"text\").text(d => d.id).attr('text-anchor', 'center').on('click', this.clicked).merge(this.node);\n\n      // Apply the general update pattern to the links.\n      this.link = this.link.data(this.links, function(d) { return d.source.id + \"-\" + d.target.id; });\n      this.link.exit().remove();\n      this.link = this.link.enter().append(\"path\").attr(\"marker-end\", function(d) { return \"url(#arrow)\"; }).merge(this.link);\n      \n      this.forceSimulation.nodes(this.nodes)\n      this.forceSimulation.force(\"link\").links(this.links);\n      this.forceSimulation.alpha(1).restart()\n\n      this.generateOutput()\n    },\n    clicked: function(d){\n      if(this.active === d){\n        this.active = null\n      } else if(this.active){\n        this.linksIds.push({ source: this.active.id, target: d.id })\n        this.active = null\n      } else {\n        this.active = d\n      }\n    },\n    linkArc(d) {\n      var dx = d.target.x - d.source.x,\n          dy = d.target.y - d.source.y,\n          dr = Math.sqrt(dx * dx + dy * dy);\n      return \"M\" + d.source.x + \",\" + d.source.y + \"A\" + dr + \",\" + dr + \" 0 0,1 \" + d.target.x + \",\" + d.target.y;\n    }\n  },\n  mounted: function(){\n    this.active = null\n    // this.links = []\n    this.forceSimulation = forceSimulation(this.nodes)\n      .force(\"link\", forceLink(this.links).distance(200))\n      .force(\"charge\", forceManyBody().strength(-1000))\n      .force(\"x\", forceX())\n      .force(\"y\", forceY())\n      // .alphaTarget(1)\n      .on(\"tick\", this.ticked)\n    \n    this.svg = select(this.$refs.svg)\n    this.svg.append(\"defs\").append(\"marker\")\n      .attr(\"id\", \"arrow\")\n      .attr(\"viewBox\", \"0 -5 10 10\")\n      .attr(\"refX\", 10)\n      .attr(\"refY\", 0)\n      .attr(\"markerWidth\", 6)\n      .attr(\"markerHeight\", 6)\n      .attr(\"orient\", \"auto\")\n      .append(\"path\")\n        .attr(\"d\", \"M0,-5L10,0L0,5\");\n\n    this.g = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + this.width / 2 + \",\" + this.height / 2 + \")\"),\n    this.link = this.g.append(\"g\").attr(\"stroke\", \"#000\").attr(\"stroke-width\", 1.5).selectAll(\".link\"),\n    this.node = this.g.append(\"g\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 1.5).selectAll(\".node\");\n    this.update()\n  }\n}\n</script>\n\n<style>\n  .graph text {\n    fill:blue;\n    stroke: none;\n  }\n  .graph path {\n    stroke:blue;\n    fill: none;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Graph.vue?27c5da1a","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-41df72c7\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Graph.vue\n// module id = ZBpI\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.data),\n      expression: \"data\"\n    }],\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.data)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.data = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('graph', {\n    attrs: {\n      \"data\": _vm.data\n    },\n    model: {\n      value: (_vm.output),\n      callback: function($$v) {\n        _vm.output = $$v\n      },\n      expression: \"output\"\n    }\n  }), _vm._v(\" \"), _c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.output),\n      expression: \"output\"\n    }],\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.output)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.output = $event.target.value\n      }\n    }\n  })], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8f2597c2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = lQHD\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <input type=\"text\" v-model=\"data\" />\n    <graph :data=\"data\" v-model=\"output\" />\n    <textarea type=\"text\" v-model=\"output\" />\n  </div>\n</template>\n\n<script>\n\nimport Graph from './components/Graph'\n\nexport default {\n  name: 'app',\n  data () {\n    return {\n      data: 'Foo Bar Baz Test Dot',\n      output: ''\n    }\n  },\n  components: {\n    Graph\n  }\n}\n</script>\n\n<style>\nhtml {\n  box-sizing: border-box;\n}\n*, ::before, ::after {\n  box-sizing: inherit;\n}\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\ninput {\n  width: 100%;\n  padding: 5px;\n  font-size: 20px;\n}\ntextarea {\n  width: 100%;\n  padding: 5px;\n  font-size: 12px;\n  height: 300px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue?129d5f3a"],"sourceRoot":""}